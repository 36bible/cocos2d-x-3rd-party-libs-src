#don't change the platform name!!
cfg_platform_name=ios
#default values put it here
cfg_default_build_arches="all"
cfg_default_build_mode="release"
cfg_default_build_libraries="all"
#specific default values
# cfg_default_build_api=19
# cfg_default_gcc_version=4.8
# cfg_android_ndk_path=/Users/guanghui/AndroidDev/android-ndk-r9d

#help message strings goes here
cfg_help_arch_string="armv7,armv7s,arm64,i386,x86_64"
cfg_help_sample_string="./build.sh --libs=png --arch=armv7,arm64,i368  --mode=debug"

cfg_library_install_prefix="install-${cfg_platform_name}"
cfg_library_build_folder="${cfg_platform_name}"
cfg_build_fat_library=yes


cfg_all_supported_arches=("armv7" "armv7s" "i386" "arm64" "x86_64")
cfg_all_supported_libraries=("png" "zlib" "lua" "luajit" "websockets" "curl" "freetype" "jpeg"  "tiff" "webp" "chipmunk")
cfg_default_arches_all=("armv7" "armv7s" "i386" "arm64" "x86_64")
cfg_default_libraries_all=("png" "zlib" "lua" "luajit" "websockets" "curl" "freetype" "jpeg" "tiff" "webp" "chipmunk")


cfg_build_release_mode="-O3 -DNDEBUG"
cfg_build_debug_mode="-O0 -g -DDEBUG"

function build_settings_for_ios()
{
    need_build_arch=$1
    need_build_library=$2

    if [ $need_build_arch = "i386" ] || [ $need_build_arch = "x86_64" ];then
        IOS_PLATFORM="Simulator"
        TARGET="${need_build_arch}-apple-darwin"
    else
        IOS_PLATFORM="OS"
        TARGET="arm-apple-darwin"
    fi

    
    PREFIX="${top_dir}/contrib/install-${cfg_platform_name}/${need_build_arch}"

    export BUILDFORIOS="yes"
    IOS_ARCH=$need_build_arch
    export IOS_ARCH
    export IOS_PLATFORM

    
    mkdir -p "${top_dir}/contrib/iPhone${IOS_PLATFORM}-${IOS_ARCH}"
    pushd "${top_dir}/contrib/iPhone${IOS_PLATFORM}-${IOS_ARCH}"



    ../bootstrap --enable-$need_build_library \
                 --build=x86_64-apple-darwin14 \
                 --host=${TARGET} \
                 --prefix=${PREFIX}

    echo "IOS_ARCH := ${IOS_ARCH}" >> config.mak
    echo "OPTIM := ${OPTIM}" >> config.mak
}
